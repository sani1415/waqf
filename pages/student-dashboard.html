<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Student Dashboard - Task Manager</title>
    <script src="../js/i18n.js"></script>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/student.css">
    <link rel="stylesheet" href="../css/messaging.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="student-dashboard-container">
        <!-- Compact Sidebar (hidden on mobile, shown on desktop) -->
        <div class="student-sidebar" id="studentSidebar">
            <div class="student-profile">
                <div class="student-profile-avatar" id="studentAvatar">A</div>
                <h2 id="studentNameSidebar">Student Name</h2>
                <p id="studentRole" data-i18n="student">Student</p>
            </div>

            <div class="sidebar-footer">
                <a href="/pages/student-list.html" class="back-btn-sidebar">
                    <i class="fas fa-arrow-left"></i>
                    <span data-i18n="change_student">Change Student</span>
                </a>
                <a href="/index.html" class="back-btn-sidebar">
                    <i class="fas fa-home"></i>
                    <span data-i18n="home">Home</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="student-main-content">
            <div class="student-header">
                <h1 id="studentNameHeader" data-i18n="welcome_student">Welcome, Student!</h1>
                <div class="student-header-actions" style="display: flex; align-items: center; gap: 0.75rem;">
                    <div class="lang-switcher lang-switcher-compact" aria-label="Language">
                        <button type="button" class="lang-btn" data-lang="en" onclick="setLang('en')" title="English">EN</button>
                        <button type="button" class="lang-btn" data-lang="bn" onclick="setLang('bn')" title="বাংলা">বাং</button>
                    </div>
                    <a href="/pages/student-list.html" class="btn-secondary">
                        <i class="fas fa-user-friends"></i> <span data-i18n="change_student">Change Student</span>
                    </a>
                </div>
            </div>

            <!-- Stat Cards Row -->
            <div class="stat-cards-row">
                <!-- Daily Tasks Card -->
                <div class="stat-card stat-card-daily">
                    <div class="stat-card-header">
                        <i class="fas fa-calendar-day"></i>
                        <span data-i18n="tab_daily">Daily Tasks</span>
                    </div>
                    <div class="stat-card-percentage" id="dailyPercentageCard">0%</div>
                    <div class="stat-card-progress">
                        <div class="stat-card-progress-fill daily-fill" id="dailyProgressCard" style="width: 0%"></div>
                    </div>
                    <div class="stat-card-detail">
                        <i class="fas fa-check"></i>
                        <span><strong id="dailyCompletedCard">0</strong>/<span id="dailyTotalCard">0</span></span>
                        <span class="stat-label" data-i18n="todays_completion">Today's completion</span>
                    </div>
                </div>

                <!-- One-time Tasks Card -->
                <div class="stat-card stat-card-onetime">
                    <div class="stat-card-header">
                        <i class="fas fa-tasks"></i>
                        <span data-i18n="category_onetime">One-time Tasks</span>
                    </div>
                    <div class="stat-card-percentage" id="onetimePercentageCard">0%</div>
                    <div class="stat-card-progress">
                        <div class="stat-card-progress-fill onetime-fill" id="onetimeProgressCard" style="width: 0%"></div>
                    </div>
                    <div class="stat-card-detail">
                        <i class="fas fa-check-double"></i>
                        <span><strong id="onetimeCompletedCard">0</strong>/<span id="onetimeTotalCard">0</span></span>
                        <span class="stat-label" data-i18n="overall_completion">Overall completion</span>
                    </div>
                </div>

                <!-- Exams Card -->
                <div class="stat-card stat-card-exam">
                    <div class="stat-card-header">
                        <i class="fas fa-graduation-cap"></i>
                        <span data-i18n="nav_exams">Exams</span>
                    </div>
                    <div class="stat-card-percentage" id="examPercentageCard">0%</div>
                    <div class="stat-card-progress">
                        <div class="stat-card-progress-fill exam-fill" id="examProgressCard" style="width: 0%"></div>
                    </div>
                    <div class="stat-card-detail">
                        <i class="fas fa-trophy"></i>
                        <span><strong id="examPassedCard">0</strong>/<span id="examTotalCard">0</span></span>
                        <span class="stat-label" data-i18n="passed_quizzes">Passed quizzes</span>
                    </div>
                </div>
            </div>

            <!-- CSS-only Tabbed Interface -->
            <div class="tab-wrap-student">
                <!-- Tab Radio Inputs (hidden) -->
                <input type="radio" name="student-tab" id="tab-today" checked>
                <input type="radio" name="student-tab" id="tab-tasks">
                <input type="radio" name="student-tab" id="tab-exams">
                <input type="radio" name="student-tab" id="tab-messages">

                <!-- Tab Labels -->
                <div class="tab-labels-student">
                    <label for="tab-today">
                        <i class="fas fa-calendar-day"></i>
                        <span data-i18n="today">Today</span>
                    </label>
                    <label for="tab-tasks">
                        <i class="fas fa-clipboard-list"></i>
                        <span data-i18n="tasks">Tasks</span>
                    </label>
                    <label for="tab-exams">
                        <i class="fas fa-graduation-cap"></i>
                        <span data-i18n="nav_exams">Exams</span>
                    </label>
                    <label for="tab-messages">
                        <i class="fas fa-comments"></i>
                        <span data-i18n="messages">Messages</span>
                        <span id="msgUnreadDot" class="tab-unread-dot" style="display: none;"></span>
                    </label>
                </div>

                <!-- Tab Panels -->
                <div class="panels-student">
                    <!-- TODAY TAB -->
                    <div class="panel-student panel-today">
                        <div class="tasks-section daily-tasks-section">
                            <div class="section-title">
                                <i class="fas fa-calendar-day"></i>
                                <span data-i18n="todays_daily_tasks">Today's Daily Tasks</span>
                                <span class="today-date" id="todayDate"></span>
                            </div>
                            <div id="dailyTasksList" class="tasks-list daily-tasks-list">
                                <!-- Daily tasks will be dynamically added here -->
                            </div>
                        </div>
                    </div>
                    <!-- END TODAY TAB -->

                    <!-- TASKS TAB -->
                    <div class="panel-student panel-tasks">
                        <!-- Pending Tasks Section -->
                        <div class="tasks-section" style="margin-bottom: 2rem;">
                            <div class="section-title">
                                <i class="fas fa-clipboard-list"></i>
                                <span data-i18n="pending_tasks">Pending Tasks</span>
                            </div>
                            <div id="pendingTasksList" class="tasks-list">
                                <!-- Pending tasks will be dynamically added here -->
                            </div>
                        </div>

                        <!-- Completed Tasks Section -->
                        <div class="tasks-section">
                            <div class="section-title">
                                <i class="fas fa-check-circle"></i>
                                <span data-i18n="completed_tasks">Completed Tasks</span>
                            </div>
                            <div id="completedTasksList" class="tasks-list">
                                <!-- Completed tasks will be dynamically added here -->
                            </div>
                        </div>
                    </div>
                    <!-- END TASKS TAB -->

                    <!-- EXAMS TAB -->
                    <div class="panel-student panel-exams">
                        <!-- Available Quizzes Section -->
                        <div class="tasks-section" style="margin-bottom: 2rem;">
                            <div class="section-title">
                                <i class="fas fa-clipboard-check"></i>
                                <span data-i18n="available_quizzes">Available Quizzes</span>
                            </div>
                            <div id="availableQuizzesList" class="quizzes-grid-student">
                                <!-- Available quizzes will be dynamically added here -->
                            </div>
                        </div>

                        <!-- Completed Quizzes Section -->
                        <div class="tasks-section">
                            <div class="section-title">
                                <i class="fas fa-trophy"></i>
                                <span data-i18n="completed_quizzes">Completed Quizzes</span>
                            </div>
                            <div id="completedQuizzesList" class="quizzes-grid-student">
                                <!-- Completed quizzes will be dynamically added here -->
                            </div>
                        </div>
                    </div>
                    <!-- END EXAMS TAB -->

                    <!-- MESSAGES TAB -->
                    <div class="panel-student panel-messages">
                        <div class="messages-tab-area" id="messagesTabArea">
                            <!-- Messages will be loaded by JS -->
                        </div>
                        <div class="messages-tab-input">
                            <input type="text" id="messageInputTab" placeholder="Type a message..." data-i18n-placeholder="type_message">
                            <button type="button" id="messageSendBtnTab">
                                <i class="fas fa-paper-plane"></i>
                                <span data-i18n="send">Send</span>
                            </button>
                        </div>
                    </div>
                    <!-- END MESSAGES TAB -->
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Storage Adapters -->
    <script src="../js/storage/adapter.js"></script>
    <script src="../js/storage/localStorage.js"></script>
    <script src="../js/storage/firebase.js"></script>
    <script src="../js/storage/firebase-config.js"></script>
    <script src="../js/storage/config.js"></script>
    
    <!-- Data Manager & App Logic -->
    <script src="../js/data-manager.js"></script>
    <script src="../js/student-dashboard.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Details - Task Manager</title>
    <script src="../js/i18n.js"></script>
    <script src="../js/hijri-date.js"></script>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/teacher.css">
    <link rel="stylesheet" href="../css/messaging.css">
    <link rel="stylesheet" href="../css/teacher-student-detail.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="teacher-page">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-graduation-cap"></i>
            <h2 data-i18n="task_manager">Task Manager</h2>
        </div>
        
        <nav class="sidebar-nav">
            <a href="/pages/teacher-dashboard.html" class="nav-item">
                <i class="fas fa-home"></i>
                <span data-i18n="nav_dashboard">Dashboard</span>
            </a>
            <a href="/pages/teacher-dashboard.html#manage-tasks" class="nav-item">
                <i class="fas fa-tasks"></i>
                <span data-i18n="nav_manage_tasks">Manage Tasks</span>
            </a>
            <a href="/pages/teacher-dashboard.html#students" class="nav-item active">
                <i class="fas fa-users"></i>
                <span data-i18n="nav_students">Students</span>
            </a>
            <a href="/pages/teacher-daily-overview.html" class="nav-item">
                <i class="fas fa-table"></i>
                <span data-i18n="nav_daily_overview">Daily Tasks Overview</span>
            </a>
            <a href="/pages/teacher-exams.html" class="nav-item">
                <i class="fas fa-graduation-cap"></i>
                <span data-i18n="nav_exams">Exams</span>
            </a>
            <a href="/pages/teacher-messages.html" class="nav-item">
                <i class="fas fa-comments"></i>
                <span data-i18n="nav_messages">Messages</span>
            </a>
            <a href="/pages/teacher-dashboard.html#analytics" class="nav-item">
                <i class="fas fa-chart-bar"></i>
                <span data-i18n="nav_analytics">Analytics</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <a href="/index.html" class="nav-item" onclick="if(typeof logoutTeacher==='function')logoutTeacher();">
                <i class="fas fa-sign-out-alt"></i>
                <span data-i18n="logout">Logout</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header class="top-bar">
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="breadcrumb">
                <a href="/pages/teacher-dashboard.html" data-i18n="nav_dashboard">Dashboard</a>
                <i class="fas fa-chevron-right"></i>
                <span data-i18n="student_details">Student Details</span>
            </div>
            <div class="top-bar-right">
                <div class="lang-switcher lang-switcher-compact" aria-label="Language">
                    <button type="button" class="lang-btn" data-lang="en" onclick="setLang('en')" title="English">EN</button>
                    <button type="button" class="lang-btn" data-lang="bn" onclick="setLang('bn')" title="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ">‡¶¨‡¶æ‡¶Ç</button>
                </div>
                <div class="date-format-toggle"></div>
            <div class="user-info">
                <i class="fas fa-user-circle"></i>
                    <span data-i18n="teacher">Teacher</span>
                </div>
            </div>
        </header>

        <div class="detail-container">
            <div id="studentDetailLoader" class="loading-spinner" style="display:none;min-height:180px;margin:2rem 0;"><i class="fas fa-circle-notch fa-spin"></i><span data-i18n="loading">Loading...</span></div>
            <div id="studentDetailMain">
            <!-- Student Profile Card -->
            <div class="student-detail-header">
                <div class="student-profile-card">
                    <div class="profile-avatar-large" id="studentAvatar">A</div>
                    <div class="profile-info">
                        <h1 id="studentName">Student Name</h1>
                        <p id="studentEmail">student@example.com</p>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-secondary" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i> <span data-i18n="back">Back</span>
                    </button>
                    <button class="btn-primary" onclick="showEditStudentModal()">
                        <i class="fas fa-edit"></i> <span data-i18n="edit_profile">Edit Profile</span>
                    </button>
                    <button class="btn-primary" onclick="assignNewTask()">
                        <i class="fas fa-plus"></i> <span data-i18n="assign_task">Assign Task</span>
                    </button>
                </div>
            </div>

            <!-- Tabbed Interface for Student Details -->
            <div class="tab-wrap-student-detail">
                <!-- Tab Radio Inputs (hidden) -->
                <input type="radio" name="student-tab" id="tab-profile" checked>
                <input type="radio" name="student-tab" id="tab-tasks">
                <input type="radio" name="student-tab" id="tab-exams">
                <input type="radio" name="student-tab" id="tab-notes">
                <input type="radio" name="student-tab" id="tab-message">

                <!-- Tab Labels -->
                <div class="tab-labels-student-detail">
                    <label for="tab-profile">
                        <i class="fas fa-user"></i>
                        <span data-i18n="profile">Profile</span>
                    </label>
                    <label for="tab-tasks">
                        <i class="fas fa-tasks"></i>
                        <span data-i18n="tasks">Tasks</span>
                    </label>
                    <label for="tab-exams">
                        <i class="fas fa-file-alt"></i>
                        <span data-i18n="nav_exams">Exams</span>
                    </label>
                    <label for="tab-notes">
                        <i class="fas fa-clipboard"></i>
                        <span data-i18n="notes">Notes</span>
                    </label>
                    <label for="tab-message">
                        <i class="fas fa-comments"></i>
                        <span data-i18n="messages">Messages</span>
                    </label>
                </div>

                <!-- Tab Panels -->
                <div class="panels-student-detail">
                    
                    <!-- PROFILE TAB -->
                    <div class="panel-student-detail panel-profile">
                        <!-- Student Profile Info Section -->
                        <div class="student-profile-info-section">
                            <h3 class="profile-section-title">
                                <i class="fas fa-user-circle"></i> <span data-i18n="student_information">Student Information</span>
                            </h3>
                            <div class="profile-info-grid">
                    <!-- Basic Information -->
                    <div class="info-card">
                        <h4><i class="fas fa-id-card"></i> <span data-i18n="basic_details">Basic Details</span></h4>
                        <div class="info-row">
                            <span class="info-label" data-i18n="name">Name:</span>
                            <span class="info-value" id="profileStudentName">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="student_id">Student ID:</span>
                            <span class="info-value" id="profileStudentId">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="date_of_birth">Date of Birth:</span>
                            <span class="info-value" id="profileDateOfBirth">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="year">Year:</span>
                            <span class="info-value" id="profileYear">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="admission_date">Admission Date:</span>
                            <span class="info-value" id="profileAdmissionDate">-</span>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="info-card">
                        <h4><i class="fas fa-address-book"></i> <span data-i18n="contact_details">Contact Details</span></h4>
                        <div class="info-row">
                            <span class="info-label" data-i18n="phone">Phone:</span>
                            <span class="info-value" id="profilePhone">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="email">Email:</span>
                            <span class="info-value" id="profileEmail">-</span>
                        </div>
                    </div>

                    <!-- Parent Information -->
                    <div class="info-card">
                        <h4><i class="fas fa-users"></i> <span data-i18n="parent_guardian_info">Parent/Guardian</span></h4>
                        <div class="info-row">
                            <span class="info-label" data-i18n="name">Name:</span>
                            <span class="info-value" id="profileParentName">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="phone">Phone:</span>
                            <span class="info-value" id="profileParentPhone">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="email">Email:</span>
                            <span class="info-value" id="profileParentEmail">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="father_work">Father's Work:</span>
                            <span class="info-value" id="profileFatherWork">-</span>
                        </div>
                    </div>

                    <!-- Address -->
                    <div class="info-card">
                        <h4><i class="fas fa-map-marker-alt"></i> <span data-i18n="address">Address</span></h4>
                        <div class="info-row">
                            <span class="info-label" data-i18n="district">District:</span>
                            <span class="info-value" id="profileDistrict">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="upazila">Upazila:</span>
                            <span class="info-value" id="profileUpazila">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="detail_address">Detail Address:</span>
                            <span class="info-value" id="profileAddress">-</span>
                        </div>
                    </div>

                    <!-- Enrollment Information -->
                    <div class="info-card">
                        <h4><i class="fas fa-calendar-check"></i> <span data-i18n="enrollment_details">Enrollment</span></h4>
                        <div class="info-row">
                            <span class="info-label" data-i18n="enrolled">Enrolled:</span>
                            <span class="info-value" id="profileEnrollmentDate">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="member_since">Member Since:</span>
                            <span class="info-value" id="profileMemberSince">-</span>
                        </div>
                    </div>

                    <!-- Login & PIN Information -->
                    <div class="info-card">
                        <h4><i class="fas fa-key"></i> <span data-i18n="login_pin">Login & PIN</span></h4>
                        <div class="info-row">
                            <span class="info-label" data-i18n="login_id">Login ID:</span>
                            <span class="info-value" id="profileLoginId">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="pin_last_changed">PIN last changed:</span>
                            <span class="info-value" id="profilePinSetAt">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label" data-i18n="pin_changed_by">Changed by:</span>
                            <span class="info-value" id="profilePinSetBy">-</span>
                        </div>
                        <button type="button" class="btn-secondary" onclick="showResetPinModal()" style="margin-top:0.5rem;">
                            <i class="fas fa-sync-alt"></i> <span data-i18n="pin_reset">Reset PIN</span>
                        </button>
                    </div>
                            </div>
                        </div>

                        <!-- Compact Dual Progress Section -->
                        <div class="compact-progress-section">
                <!-- Daily Progress -->
                <div class="compact-progress-card daily-card">
                    <div class="compact-progress-header">
                        <i class="fas fa-calendar-day"></i>
                        <span data-i18n="tab_daily">Daily Tasks</span>
                        <span class="compact-percentage" id="dailyPercentageCompact">0%</span>
                    </div>
                    <div class="compact-progress-bar">
                        <div class="compact-progress-fill daily-fill" id="dailyProgressCompact" style="width: 0%"></div>
                    </div>
                    <div class="compact-stats-row">
                        <span><i class="fas fa-check"></i> <strong id="dailyCompletedCompact">0</strong>/<span id="dailyTotalCompact">0</span></span>
                        <span class="stat-label" data-i18n="todays_completion">Today's completion</span>
                    </div>
                </div>

                <!-- One-time Progress -->
                <div class="compact-progress-card onetime-card">
                    <div class="compact-progress-header">
                        <i class="fas fa-tasks"></i>
                        <span data-i18n="category_onetime">One-time Tasks</span>
                        <span class="compact-percentage" id="onetimePercentageCompact">0%</span>
                    </div>
                    <div class="compact-progress-bar">
                        <div class="compact-progress-fill onetime-fill" id="onetimeProgressCompact" style="width: 0%"></div>
                    </div>
                    <div class="compact-stats-row">
                        <span><i class="fas fa-check-double"></i> <strong id="onetimeCompletedCompact">0</strong>/<span id="onetimeTotalCompact">0</span></span>
                        <span class="stat-label" data-i18n="overall_completion">Overall completion</span>
                    </div>
                </div>

                <!-- Quiz Progress -->
                <div class="compact-progress-card quiz-card">
                    <div class="compact-progress-header">
                        <i class="fas fa-graduation-cap"></i>
                        <span data-i18n="quizzes">Quizzes</span>
                        <span class="compact-percentage" id="quizPercentageCompact">0%</span>
                    </div>
                    <div class="compact-progress-bar">
                        <div class="compact-progress-fill quiz-fill" id="quizProgressCompact" style="width: 0%"></div>
                    </div>
                    <div class="compact-stats-row">
                        <span><i class="fas fa-trophy"></i> <strong id="quizPassedCompact">0</strong>/<span id="quizTotalCompact">0</span></span>
                        <span class="stat-label" data-i18n="passed_quizzes">Passed quizzes</span>
                    </div>
                        </div>
                        </div>
                    </div>
                    <!-- END PROFILE TAB -->

                    <!-- TASKS TAB -->
                    <div class="panel-student-detail panel-tasks">
                        <!-- Date Picker Header -->
                        <div class="task-date-header">
                            <label for="date-picker-open" class="task-date-picker">
                                <i class="fas fa-calendar-alt"></i>
                                <span class="date-display" id="currentDateDisplay">Loading...</span>
                                <i class="fas fa-chevron-down"></i>
                            </label>
                            <button class="btn-primary" onclick="assignNewTask()">
                                <i class="fas fa-plus"></i> <span data-i18n="assign_task">Assign Task</span>
                            </button>
                        </div>

                        <!-- Daily Tasks Excel Grid -->
                        <h3 class="task-section-title">
                            <i class="fas fa-sync-alt"></i>
                            <span data-i18n="daily_tasks_completion">Daily Tasks Completion</span>
                        </h3>
                        <div class="task-grid-wrap">
                            <table class="task-grid" id="dailyTasksGrid">
                                <thead id="dailyTasksGridHead">
                                    <tr>
                                        <th class="task-col" data-i18n="daily_task">Daily Task</th>
                                        <!-- Date columns will be populated by JS -->
                                    </tr>
                                </thead>
                                <tbody id="dailyTasksGridBody">
                                    <!-- Rows will be populated by JS -->
                                </tbody>
                            </table>
                        </div>

                        <!-- One-Time Tasks Excel Grid -->
                        <h3 class="task-section-title">
                            <i class="fas fa-clipboard-list"></i>
                            <span data-i18n="onetime_tasks_progress">One-Time Tasks Progress</span>
                        </h3>
                        <div class="task-grid-wrap">
                            <table class="task-grid" id="onetimeTasksGrid">
                                <thead>
                                    <tr>
                                        <th class="task-col" data-i18n="onetime_task">One-Time Task</th>
                                        <th data-i18n="assigned">Assigned</th>
                                        <th data-i18n="due_date">Due Date</th>
                                        <th data-i18n="status">Status</th>
                                        <th data-i18n="completed">Completed</th>
                                    </tr>
                                </thead>
                                <tbody id="onetimeTasksGridBody">
                                    <!-- Rows will be populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- END TASKS TAB -->

                    <!-- EXAMS TAB -->
                    <div class="panel-student-detail panel-exams">
                        <div class="exams-header">
                            <h4>
                                <i class="fas fa-chart-line"></i>
                                <span data-i18n="exam_results_student">Exam Results for this Student</span>
                            </h4>
                            <button class="btn-primary" onclick="createExamForStudent()">
                                <i class="fas fa-plus"></i>
                                <span data-i18n="create_exam">Create Exam</span>
                            </button>
                        </div>
                        <p class="exams-summary" data-i18n="click_exam_detail">Click any exam name to view questions, student answers, and detailed scoring.</p>
                        <div id="examResultsList">
                            <!-- Exam results will be populated by JS -->
                        </div>

                        <!-- Exam Detail Modals (will be generated dynamically by JS, but here's a template) -->
                        <!-- These will be created dynamically when exams are loaded -->
                    </div>
                    <!-- END EXAMS TAB -->

                    <!-- NOTES TAB -->
                    <div class="panel-student-detail panel-notes">
                        <!-- Existing Notes Section (moved here) -->
                        <!-- Teacher Notes Section (existing) -->
                        <div class="teacher-notes-section">
                <div class="notes-header">
                    <h3 class="notes-title">
                        <i class="fas fa-clipboard"></i> <span data-i18n="teacher_notes_analysis">Teacher Notes & Analysis</span>
                    </h3>
                    <button class="btn-primary" onclick="showAddNoteModal()">
                        <i class="fas fa-plus"></i> <span data-i18n="add_note">Add Note</span>
                    </button>
                </div>
                <div id="notesList" class="notes-container">
                    <!-- Notes will be dynamically loaded here -->
                        </div>
                    </div>
                    </div>
                    <!-- END NOTES TAB -->

                    <!-- MESSAGE TAB -->
                    <div class="panel-student-detail panel-message">
                        <div class="message-area" id="messagesArea">
                            <!-- Messages will be loaded by JS -->
                        </div>
                        <div class="message-input-wrap">
                            <input type="text" id="messageInput" placeholder="Type a message..." data-i18n-placeholder="type_message">
                            <button type="button" id="messageSendBtn">
                                <i class="fas fa-paper-plane"></i>
                                <span data-i18n="send">Send</span>
                            </button>
                        </div>
                    </div>
                    <!-- END MESSAGE TAB -->

                </div>
                <!-- END TAB PANELS -->

                <!-- Date Picker Modal (moved here so it works regardless of tab) -->
                <input type="checkbox" id="date-picker-open" class="modal-toggle">
                <label for="date-picker-open" class="modal-backdrop" id="date-picker-backdrop"></label>
                <div class="modal checkbox-modal" id="datePickerModal">
                    <div class="modal-header">
                        <h3><i class="fas fa-calendar-alt"></i> <span data-i18n="select_date">Select Date</span></h3>
                        <label for="date-picker-open" class="modal-close" data-i18n="close">Close</label>
                    </div>
                    <div class="modal-body date-picker-calendar">
                        <p class="date-picker-month" id="datePickerMonth">...</p>
                        <div class="date-picker-grid" id="datePickerGrid">
                            <!-- Calendar grid will be populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Date Detail Sheet (hidden for now - can be enabled later) -->
                <!-- 
                <input type="checkbox" id="date-detail-open" class="modal-toggle">
                <label for="date-detail-open" class="modal-backdrop" id="date-detail-backdrop"></label>
                <div class="sheet checkbox-sheet" id="dateDetailSheet">
                    <div class="sheet-handle"></div>
                    <div class="sheet-header">
                        <h3><i class="fas fa-calendar-day"></i> <span id="sheetDateTitle">...</span> <span data-i18n="daily_situation">‚Äî Daily Situation</span></h3>
                        <label for="date-detail-open" class="sheet-close" data-i18n="close">Close</label>
                    </div>
                    <div class="sheet-body" id="sheetBody">
                    </div>
                </div>
                -->
            </div>
            <!-- END TAB WRAP -->
            </div>
            <!-- END studentDetailMain -->
        </div>
    </div>

    <!-- Add Note Modal -->
    <div id="addNoteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddNoteModal()">&times;</span>
            <h2><i class="fas fa-sticky-note"></i> <span data-i18n="add_new_note">Add New Note</span></h2>
            <form id="addNoteForm">
                <div class="form-group">
                    <label for="noteCategory"><span data-i18n="category">Category</span> <span class="required" data-i18n="required">*</span></label>
                    <select id="noteCategory" required>
                        <option value="" data-i18n="select_category">Select Category</option>
                        <option value="Academic">üìö Academic</option>
                        <option value="Behavioral">üòä Behavioral</option>
                        <option value="General">üìù General</option>
                        <option value="Parent Communication">üë™ Parent Communication</option>
                        <option value="Achievement">üèÜ Achievement</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="noteText"><span data-i18n="note">Note</span> <span class="required" data-i18n="required">*</span></label>
                    <textarea id="noteText" rows="5" required data-i18n-placeholder="placeholder_note_text" placeholder="Write your note or analysis here..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeAddNoteModal()">
                        <i class="fas fa-times"></i> <span data-i18n="btn_cancel">Cancel</span>
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> <span data-i18n="add_note">Add Note</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Note Modal -->
    <div id="editNoteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditNoteModal()">&times;</span>
            <h2><i class="fas fa-edit"></i> <span data-i18n="edit_note">Edit Note</span></h2>
            <form id="editNoteForm">
                <input type="hidden" id="editNoteId">
                <div class="form-group">
                    <label for="editNoteCategory"><span data-i18n="category">Category</span> <span class="required" data-i18n="required">*</span></label>
                    <select id="editNoteCategory" required>
                        <option value="" data-i18n="select_category">Select Category</option>
                        <option value="Academic">üìö Academic</option>
                        <option value="Behavioral">üòä Behavioral</option>
                        <option value="General">üìù General</option>
                        <option value="Parent Communication">üë™ Parent Communication</option>
                        <option value="Achievement">üèÜ Achievement</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editNoteText">Note <span class="required">*</span></label>
                    <textarea id="editNoteText" rows="5" required placeholder="Write your note or analysis here..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeEditNoteModal()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Student Modal -->
    <div id="editStudentModal" class="modal">
        <div class="modal-content modal-large edit-student-modal-content">
            <div class="edit-modal-header-sticky">
                <h2><i class="fas fa-user-edit"></i> Edit Student Profile</h2>
                <span class="close" onclick="closeEditStudentModal()">&times;</span>
            </div>
            <form id="editStudentForm" class="comprehensive-form edit-student-form">
                <div class="edit-form-body-scroll">
                <!-- Section 1: Basic Information -->
                <div class="form-section">
                    <h3 class="section-header"><i class="fas fa-id-card"></i> Basic Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editStudentName">Student Name <span class="required">*</span></label>
                            <input type="text" id="editStudentName" required placeholder="Full Name">
                        </div>
                        <div class="form-group">
                            <label for="editStudentId">Student ID <span class="required">*</span></label>
                            <input type="text" id="editStudentId" required readonly placeholder="waqf-001" title="Login ID (cannot be changed)">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editDateOfBirth">Date of Birth <span class="required">*</span></label>
                            <input type="date" id="editDateOfBirth" required>
                        </div>
                        <div class="form-group">
                            <label for="editEnrollmentDate"><span data-i18n="admission_date">Admission Date</span> <span class="required">*</span></label>
                            <input type="date" id="editEnrollmentDate" required>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Contact Information -->
                <div class="form-section">
                    <h3 class="section-header"><i class="fas fa-address-book"></i> Contact Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editStudentPhone">Student Phone</label>
                            <input type="tel" id="editStudentPhone" placeholder="+1234567890">
                        </div>
                        <div class="form-group">
                            <label for="editStudentEmail">Student Email</label>
                            <input type="email" id="editStudentEmail" placeholder="student@example.com">
                        </div>
                    </div>
                </div>

                <!-- Section 3: Parent/Guardian Information -->
                <div class="form-section">
                    <h3 class="section-header"><i class="fas fa-users"></i> Parent/Guardian Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editParentName">Parent/Guardian Name <span class="required">*</span></label>
                            <input type="text" id="editParentName" required placeholder="Full Name">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editParentPhone">Parent Phone <span class="required">*</span></label>
                            <input type="tel" id="editParentPhone" required placeholder="+1234567890">
                        </div>
                        <div class="form-group">
                            <label for="editParentEmail">Parent Email</label>
                            <input type="email" id="editParentEmail" placeholder="parent@example.com">
                        </div>
                        <div class="form-group">
                            <label for="editFatherWork" data-i18n="father_work">Father's Work</label>
                            <input type="text" id="editFatherWork" data-i18n-placeholder="placeholder_father_work" placeholder="e.g. Business, Teacher">
                        </div>
                    </div>
                    <div class="form-section">
                        <h3 class="section-header"><i class="fas fa-map-marker-alt"></i> <span data-i18n="address">Address</span></h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editDistrict" data-i18n="district">District (‡¶ú‡ßá‡¶≤‡¶æ)</label>
                                <input type="text" id="editDistrict" data-i18n-placeholder="placeholder_district" placeholder="District">
                            </div>
                            <div class="form-group">
                                <label for="editUpazila" data-i18n="upazila">Upazila (‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ)</label>
                                <input type="text" id="editUpazila" data-i18n-placeholder="placeholder_upazila" placeholder="Upazila / Sub-district">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editAddress" data-i18n="detail_address">Detail Address</label>
                            <input type="text" id="editAddress" data-i18n-placeholder="placeholder_address" placeholder="Village, Road, House no, etc.">
                        </div>
                    </div>
                </div>
                </div>
                <!-- Form Actions - floating on mobile -->
                <div class="form-actions edit-form-actions-sticky">
                    <button type="button" class="btn-secondary" onclick="closeEditStudentModal()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Reset PIN Modal -->
    <div id="resetPinModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeResetPinModal()">&times;</span>
            <h2><i class="fas fa-key"></i> <span data-i18n="pin_reset">Reset PIN</span></h2>
            <form id="resetPinForm" onsubmit="handleResetPin(event)">
                <div class="form-group">
                    <label for="resetPinNew"><span data-i18n="new_pin">New PIN</span> <span class="required" data-i18n="required">*</span></label>
                    <input type="password" id="resetPinNew" required minlength="4" maxlength="8" data-i18n-placeholder="placeholder_pin" placeholder="4-6 digit PIN" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="resetPinConfirm"><span data-i18n="confirm_pin">Confirm PIN</span> <span class="required" data-i18n="required">*</span></label>
                    <input type="password" id="resetPinConfirm" required minlength="4" maxlength="8" data-i18n-placeholder="placeholder_pin" placeholder="Confirm PIN" autocomplete="new-password">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeResetPinModal()">
                        <i class="fas fa-times"></i> <span data-i18n="btn_cancel">Cancel</span>
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> <span data-i18n="reset">Reset</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Mobile Bottom Navigation (scrollable) -->
    <div class="bottom-nav-wrapper">
        <div class="bottom-nav-fade bottom-nav-fade-left" id="bottomNavFadeLeft" aria-hidden="true"><i class="fas fa-chevron-left"></i></div>
        <nav class="bottom-nav" id="bottomNav" aria-label="Main navigation">
            <a href="/pages/teacher-dashboard.html" class="bottom-nav-item" title="Dashboard">
                <i class="fas fa-home"></i>
                <span data-i18n="nav_dashboard">Dashboard</span>
            </a>
            <a href="/pages/teacher-dashboard.html#manage-tasks" class="bottom-nav-item" title="Tasks">
                <i class="fas fa-tasks"></i>
                <span data-i18n="stat_tasks">Tasks</span>
            </a>
            <a href="/pages/teacher-dashboard.html#students" class="bottom-nav-item active" title="Students">
                <i class="fas fa-users"></i>
                <span data-i18n="nav_students">Students</span>
            </a>
            <a href="/pages/teacher-messages.html" class="bottom-nav-item bottom-nav-item-msg" title="Messages">
                <i class="fas fa-comments"></i>
                <span data-i18n="nav_messages">Messages</span>
                <span id="messagesUnreadBadgeNav" class="bottom-nav-badge" style="display: none;" aria-label="Unread messages">0</span>
            </a>
            <a href="/pages/teacher-daily-overview.html" class="bottom-nav-item" title="Daily Overview">
                <i class="fas fa-table"></i>
                <span data-i18n="nav_overview">Overview</span>
            </a>
            <a href="/pages/teacher-exams.html" class="bottom-nav-item" title="Exams">
                <i class="fas fa-graduation-cap"></i>
                <span data-i18n="nav_exams">Exams</span>
            </a>
            <a href="#" class="bottom-nav-item bottom-nav-menu" id="bottomNavMenu" title="Menu">
                <i class="fas fa-ellipsis-v"></i>
                <span data-i18n="nav_menu">Menu</span>
            </a>
        </nav>
        <div class="bottom-nav-fade bottom-nav-fade-right" id="bottomNavFadeRight" aria-hidden="true"><i class="fas fa-chevron-right"></i></div>
    </div>

    <!-- Firebase SDK (Uncomment when using Firebase) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Storage Adapters (in separate folder) -->
    <script src="../js/storage/adapter.js"></script>
    <script src="../js/storage/localStorage.js"></script>
    <script src="../js/storage/firebase.js"></script>
    <script src="../js/storage/firebase-config.js"></script>
    <script src="../js/storage/config.js"></script>
    
    <!-- Data Manager & App Logic -->
    <script src="../js/auth-config.js"></script>
    <script src="../js/data-manager.js"></script>
    <script src="../js/teacher-unread-badge.js"></script>
    <script src="../js/bottom-nav-scroll.js"></script>
    <script src="../js/teacher-student-detail.js"></script>
</body>
</html>

